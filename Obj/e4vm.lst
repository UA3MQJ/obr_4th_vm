                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.9.3 #11378 (MINGW32)
                              4 ;--------------------------------------------------------
                              5 	.module e4vm
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _main
                             12 	.globl _e4vm_rw__init
                             13 	.globl _e4vm_rw_add_core_words
                             14 	.globl _e4vm_comment__init
                             15 	.globl _e4vm_comment_add_core_words
                             16 	.globl _e4vm_mem__init
                             17 	.globl _e4vm_mem_add_core_words
                             18 	.globl _e4vm_utils__init
                             19 	.globl _e4vm_utils_keyboard_read_string
                             20 	.globl _e4vm_utils_init
                             21 	.globl _e4vm_boolean__init
                             22 	.globl _e4vm_boolean_add_core_words
                             23 	.globl _e4vm_math__init
                             24 	.globl _e4vm_math_add_core_words
                             25 	.globl _e4vm_stack__init
                             26 	.globl _e4vm_stack_add_core_words
                             27 	.globl _e4vm_core_ext__init
                             28 	.globl _e4vm_core_ext_interpreter
                             29 	.globl _e4vm_core_ext_add_core_words
                             30 	.globl _e4vm_core__init
                             31 	.globl _e4vm_core_add_core_words
                             32 	.globl _e4vm_type__init
                             33 	.globl _Basic_Quit_IM1
                             34 	.globl _Basic_PAUSE_EI
                             35 	.globl _Console_Clear_COMPACT
                             36 	.globl _Console_WriteStr_C_COMPACT
                             37 	.globl _Console_WriteLn_COMPACT
                             38 ;--------------------------------------------------------
                             39 ; special function registers
                             40 ;--------------------------------------------------------
                             41 ;--------------------------------------------------------
                             42 ; ram data
                             43 ;--------------------------------------------------------
                             44 	.area _DATA
   0000                      45 _e4vm_vm_static:
   0000                      46 	.ds 1371
   055B                      47 _e4vm_vm:
   055B                      48 	.ds 2
                             49 ;--------------------------------------------------------
                             50 ; ram data
                             51 ;--------------------------------------------------------
                             52 	.area _INITIALIZED
                             53 ;--------------------------------------------------------
                             54 ; absolute external ram data
                             55 ;--------------------------------------------------------
                             56 	.area _DABS (ABS)
                             57 ;--------------------------------------------------------
                             58 ; global & static initialisations
                             59 ;--------------------------------------------------------
                             60 	.area _HOME
                             61 	.area _GSINIT
                             62 	.area _GSFINAL
                             63 	.area _GSINIT
                             64 ;--------------------------------------------------------
                             65 ; Home
                             66 ;--------------------------------------------------------
                             67 	.area _HOME
                             68 	.area _HOME
                             69 ;--------------------------------------------------------
                             70 ; code
                             71 ;--------------------------------------------------------
                             72 	.area _CODE
                             73 ;e4vm.c:29: static void e4vm_do_hello (e4vm_type_x4thPtr *v)
                             74 ;	---------------------------------
                             75 ; Function e4vm_do_hello
                             76 ; ---------------------------------
   0000                      77 _e4vm_do_hello:
   0000 CDr00r00      [17]   78 	call	___sdcc_enter_ix
                             79 ;e4vm.c:31: (*v)->mem[30] = 1;
   0003 DD 6E 04      [19]   80 	ld	l, 4 (ix)
   0006 DD 66 05      [19]   81 	ld	h, 5 (ix)
   0009 4E            [ 7]   82 	ld	c, (hl)
   000A 23            [ 6]   83 	inc	hl
   000B 46            [ 7]   84 	ld	b, (hl)
   000C 21 C6 00      [10]   85 	ld	hl, #0x00c6
   000F 09            [11]   86 	add	hl, bc
   0010 36 01         [10]   87 	ld	(hl), #0x01
   0012 23            [ 6]   88 	inc	hl
   0013 36 00         [10]   89 	ld	(hl), #0x00
                             90 ;e4vm.c:32: }
   0015 DD E1         [14]   91 	pop	ix
   0017 C9            [10]   92 	ret
                             93 ;e4vm.c:34: static void e4vm_test_console (e4vm_type_x4thPtr *v)
                             94 ;	---------------------------------
                             95 ; Function e4vm_test_console
                             96 ; ---------------------------------
   0018                      97 _e4vm_test_console:
   0018 CDr00r00      [17]   98 	call	___sdcc_enter_ix
                             99 ;e4vm.c:36: Console_WriteLn();
   001B CDr00r00      [17]  100 	call	_Console_WriteLn_COMPACT
                            101 ;e4vm.c:37: e4vm_utils_init(v);
   001E DD 6E 04      [19]  102 	ld	l, 4 (ix)
   0021 DD 66 05      [19]  103 	ld	h, 5 (ix)
   0024 E5            [11]  104 	push	hl
   0025 CDr00r00      [17]  105 	call	_e4vm_utils_init
                            106 ;e4vm.c:38: e4vm_core_add_core_words(&e4vm_vm);
   0028 21r5Br05      [10]  107 	ld	hl, #_e4vm_vm
   002B E3            [19]  108 	ex	(sp),hl
   002C CDr00r00      [17]  109 	call	_e4vm_core_add_core_words
                            110 ;e4vm.c:39: e4vm_core_ext_add_core_words(&e4vm_vm);
   002F 21r5Br05      [10]  111 	ld	hl, #_e4vm_vm
   0032 E3            [19]  112 	ex	(sp),hl
   0033 CDr00r00      [17]  113 	call	_e4vm_core_ext_add_core_words
                            114 ;e4vm.c:40: e4vm_stack_add_core_words(&e4vm_vm);
   0036 21r5Br05      [10]  115 	ld	hl, #_e4vm_vm
   0039 E3            [19]  116 	ex	(sp),hl
   003A CDr00r00      [17]  117 	call	_e4vm_stack_add_core_words
                            118 ;e4vm.c:41: e4vm_math_add_core_words(&e4vm_vm);
   003D 21r5Br05      [10]  119 	ld	hl, #_e4vm_vm
   0040 E3            [19]  120 	ex	(sp),hl
   0041 CDr00r00      [17]  121 	call	_e4vm_math_add_core_words
                            122 ;e4vm.c:42: e4vm_boolean_add_core_words(&e4vm_vm);
   0044 21r5Br05      [10]  123 	ld	hl, #_e4vm_vm
   0047 E3            [19]  124 	ex	(sp),hl
   0048 CDr00r00      [17]  125 	call	_e4vm_boolean_add_core_words
                            126 ;e4vm.c:43: e4vm_comment_add_core_words(&e4vm_vm);
   004B 21r5Br05      [10]  127 	ld	hl, #_e4vm_vm
   004E E3            [19]  128 	ex	(sp),hl
   004F CDr00r00      [17]  129 	call	_e4vm_comment_add_core_words
                            130 ;e4vm.c:44: e4vm_mem_add_core_words(&e4vm_vm);
   0052 21r5Br05      [10]  131 	ld	hl, #_e4vm_vm
   0055 E3            [19]  132 	ex	(sp),hl
   0056 CDr00r00      [17]  133 	call	_e4vm_mem_add_core_words
                            134 ;e4vm.c:45: e4vm_rw_add_core_words(&e4vm_vm);
   0059 21r5Br05      [10]  135 	ld	hl, #_e4vm_vm
   005C E3            [19]  136 	ex	(sp),hl
   005D CDr00r00      [17]  137 	call	_e4vm_rw_add_core_words
   0060 F1            [10]  138 	pop	af
                            139 ;e4vm.c:46: while (1) {
   0061                     140 00102$:
                            141 ;e4vm.c:47: Console_WriteStr((CHAR*)">", 2);
   0061 21r7Fr00      [10]  142 	ld	hl, #___str_0
   0064 CDr00r00      [17]  143 	call	_Console_WriteStr_C_COMPACT
                            144 ;e4vm.c:48: e4vm_utils_keyboard_read_string(&e4vm_vm);
   0067 21r5Br05      [10]  145 	ld	hl, #_e4vm_vm
   006A E5            [11]  146 	push	hl
   006B CDr00r00      [17]  147 	call	_e4vm_utils_keyboard_read_string
   006E F1            [10]  148 	pop	af
                            149 ;e4vm.c:49: e4vm_core_ext_interpreter(v);
   006F DD 6E 04      [19]  150 	ld	l, 4 (ix)
   0072 DD 66 05      [19]  151 	ld	h, 5 (ix)
   0075 E5            [11]  152 	push	hl
   0076 CDr00r00      [17]  153 	call	_e4vm_core_ext_interpreter
   0079 F1            [10]  154 	pop	af
   007A 18 E5         [12]  155 	jr	00102$
                            156 ;e4vm.c:51: }
   007C DD E1         [14]  157 	pop	ix
   007E C9            [10]  158 	ret
   007F                     159 ___str_0:
   007F 3E                  160 	.ascii ">"
   0080 00                  161 	.db 0x00
                            162 ;e4vm.c:54: int main (int argc, char **argv)
                            163 ;	---------------------------------
                            164 ; Function main
                            165 ; ---------------------------------
   0081                     166 _main::
                            167 ;e4vm.c:59: __IMPORT(e4vm_boolean__init);
   0081 CDr00r00      [17]  168 	call	_e4vm_boolean__init
                            169 ;e4vm.c:60: __IMPORT(e4vm_comment__init);
   0084 CDr00r00      [17]  170 	call	_e4vm_comment__init
                            171 ;e4vm.c:61: __IMPORT(e4vm_core__init);
   0087 CDr00r00      [17]  172 	call	_e4vm_core__init
                            173 ;e4vm.c:62: __IMPORT(e4vm_core_ext__init);
   008A CDr00r00      [17]  174 	call	_e4vm_core_ext__init
                            175 ;e4vm.c:63: __IMPORT(e4vm_math__init);
   008D CDr00r00      [17]  176 	call	_e4vm_math__init
                            177 ;e4vm.c:64: __IMPORT(e4vm_mem__init);
   0090 CDr00r00      [17]  178 	call	_e4vm_mem__init
                            179 ;e4vm.c:65: __IMPORT(e4vm_rw__init);
   0093 CDr00r00      [17]  180 	call	_e4vm_rw__init
                            181 ;e4vm.c:66: __IMPORT(e4vm_stack__init);
   0096 CDr00r00      [17]  182 	call	_e4vm_stack__init
                            183 ;e4vm.c:67: __IMPORT(e4vm_type__init);
   0099 CDr00r00      [17]  184 	call	_e4vm_type__init
                            185 ;e4vm.c:68: __IMPORT(e4vm_utils__init);
   009C CDr00r00      [17]  186 	call	_e4vm_utils__init
                            187 ;e4vm.c:71: Basic_Init();
   009F FD CB 01 A6   [23]  188 	res	4,1(iy) 
   00A3 CD 42 16      [17]  189 	call 0x1642 
                            190 ;e4vm.c:72: Console_Clear(7);
   00A6 2E 07         [ 7]  191 	ld	l, #0x07
   00A8 CDr00r00      [17]  192 	call	_Console_Clear_COMPACT
                            193 ;e4vm.c:73: Console_SetColors(56);
   00AB 21r00r00      [10]  194 	ld	hl, #_Console_attrib
   00AE 36 38         [10]  195 	ld	(hl), #0x38
                            196 ;e4vm.c:74: e4vm_vm = (e4vm_type_x4thPtr)((SYSTEM_ADRINT)&e4vm_vm_static);
   00B0 21r00r00      [10]  197 	ld	hl, #_e4vm_vm_static
   00B3 22r5Br05      [16]  198 	ld	(_e4vm_vm), hl
                            199 ;e4vm.c:75: e4vm_test_console(&e4vm_vm);
   00B6 21r5Br05      [10]  200 	ld	hl, #_e4vm_vm
   00B9 E5            [11]  201 	push	hl
   00BA CDr18r00      [17]  202 	call	_e4vm_test_console
   00BD F1            [10]  203 	pop	af
                            204 ;e4vm.c:76: Basic_PAUSE(0);
   00BE 21 00 00      [10]  205 	ld	hl, #0x0000
   00C1 CDr00r00      [17]  206 	call	_Basic_PAUSE_EI
                            207 ;e4vm.c:77: Basic_Quit();
                            208 ;e4vm.c:78: __FINI;
                            209 ;e4vm.c:79: }
   00C4 C3r00r00      [10]  210 	jp  _Basic_Quit_IM1
                            211 	.area _CODE
                            212 	.area _INITIALIZER
                            213 	.area _CABS (ABS)
