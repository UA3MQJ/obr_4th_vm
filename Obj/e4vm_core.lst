                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.9.3 #11378 (MINGW32)
                              4 ;--------------------------------------------------------
                              5 	.module e4vm_core
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _e4vm_core__init
                             12 	.globl _e4vm_type__init
                             13 	.globl _e4vm_core_do_nop
                             14 	.globl _e4vm_core_do_list
                             15 	.globl _e4vm_core_do_next
                             16 	.globl _e4vm_core_do_exit
                             17 ;--------------------------------------------------------
                             18 ; special function registers
                             19 ;--------------------------------------------------------
                             20 ;--------------------------------------------------------
                             21 ; ram data
                             22 ;--------------------------------------------------------
                             23 	.area _DATA
                             24 ;--------------------------------------------------------
                             25 ; ram data
                             26 ;--------------------------------------------------------
                             27 	.area _INITIALIZED
                             28 ;--------------------------------------------------------
                             29 ; absolute external ram data
                             30 ;--------------------------------------------------------
                             31 	.area _DABS (ABS)
                             32 ;--------------------------------------------------------
                             33 ; global & static initialisations
                             34 ;--------------------------------------------------------
                             35 	.area _HOME
                             36 	.area _GSINIT
                             37 	.area _GSFINAL
                             38 	.area _GSINIT
                             39 ;--------------------------------------------------------
                             40 ; Home
                             41 ;--------------------------------------------------------
                             42 	.area _HOME
                             43 	.area _HOME
                             44 ;--------------------------------------------------------
                             45 ; code
                             46 ;--------------------------------------------------------
                             47 	.area _CODE
                             48 ;e4vm_core.c:20: void e4vm_core_do_nop (e4vm_type_x4thPtr *v)
                             49 ;	---------------------------------
                             50 ; Function e4vm_core_do_nop
                             51 ; ---------------------------------
   0000                      52 _e4vm_core_do_nop::
                             53 ;e4vm_core.c:22: }
   0000 C9            [10]   54 	ret
                             55 ;e4vm_core.c:25: void e4vm_core_do_list (e4vm_type_x4thPtr *v)
                             56 ;	---------------------------------
                             57 ; Function e4vm_core_do_list
                             58 ; ---------------------------------
   0001                      59 _e4vm_core_do_list::
   0001 CDr00r00      [17]   60 	call	___sdcc_enter_ix
   0004 F5            [11]   61 	push	af
                             62 ;e4vm_core.c:28: (*v)->rs[(*v)->rs_p] = (*v)->ip;
   0005 DD 7E 04      [19]   63 	ld	a, 4 (ix)
   0008 DD 77 FE      [19]   64 	ld	-2 (ix), a
   000B DD 7E 05      [19]   65 	ld	a, 5 (ix)
   000E DD 77 FF      [19]   66 	ld	-1 (ix), a
   0011 E1            [10]   67 	pop	hl
   0012 E5            [11]   68 	push	hl
   0013 4E            [ 7]   69 	ld	c, (hl)
   0014 23            [ 6]   70 	inc	hl
   0015 46            [ 7]   71 	ld	b, (hl)
   0016 21 04 00      [10]   72 	ld	hl, #0x0004
   0019 09            [11]   73 	add	hl, bc
   001A EB            [ 4]   74 	ex	de, hl
   001B 69            [ 4]   75 	ld	l, c
   001C 60            [ 4]   76 	ld	h, b
   001D C5            [11]   77 	push	bc
   001E 01 84 00      [10]   78 	ld	bc, #0x0084
   0021 09            [11]   79 	add	hl, bc
   0022 C1            [10]   80 	pop	bc
   0023 7E            [ 7]   81 	ld	a, (hl)
   0024 23            [ 6]   82 	inc	hl
   0025 66            [ 7]   83 	ld	h, (hl)
   0026 6F            [ 4]   84 	ld	l, a
   0027 29            [11]   85 	add	hl, hl
   0028 19            [11]   86 	add	hl, de
   0029 EB            [ 4]   87 	ex	de, hl
   002A 69            [ 4]   88 	ld	l, c
   002B 60            [ 4]   89 	ld	h, b
   002C 4E            [ 7]   90 	ld	c, (hl)
   002D 23            [ 6]   91 	inc	hl
   002E 46            [ 7]   92 	ld	b, (hl)
   002F 79            [ 4]   93 	ld	a, c
   0030 12            [ 7]   94 	ld	(de), a
   0031 13            [ 6]   95 	inc	de
   0032 78            [ 4]   96 	ld	a, b
   0033 12            [ 7]   97 	ld	(de), a
                             98 ;e4vm_core.c:29: (*v)->rs_p = (*v)->rs_p + 1;
   0034 E1            [10]   99 	pop	hl
   0035 E5            [11]  100 	push	hl
   0036 4E            [ 7]  101 	ld	c, (hl)
   0037 23            [ 6]  102 	inc	hl
   0038 46            [ 7]  103 	ld	b, (hl)
   0039 21 84 00      [10]  104 	ld	hl, #0x0084
   003C 09            [11]  105 	add	hl, bc
   003D 4E            [ 7]  106 	ld	c, (hl)
   003E 23            [ 6]  107 	inc	hl
   003F 46            [ 7]  108 	ld	b, (hl)
   0040 2B            [ 6]  109 	dec	hl
   0041 03            [ 6]  110 	inc	bc
   0042 78            [ 4]  111 	ld	a, b
   0043 71            [ 7]  112 	ld	(hl), c
   0044 23            [ 6]  113 	inc	hl
   0045 77            [ 7]  114 	ld	(hl), a
                            115 ;e4vm_core.c:28: (*v)->rs[(*v)->rs_p] = (*v)->ip;
   0046 E1            [10]  116 	pop	hl
   0047 E5            [11]  117 	push	hl
   0048 4E            [ 7]  118 	ld	c, (hl)
   0049 23            [ 6]  119 	inc	hl
   004A 46            [ 7]  120 	ld	b, (hl)
                            121 ;e4vm_core.c:30: (*v)->ip = (*v)->wp + 1;
   004B 69            [ 4]  122 	ld	l, c
   004C 60            [ 4]  123 	ld	h, b
   004D 23            [ 6]  124 	inc	hl
   004E 23            [ 6]  125 	inc	hl
   004F 5E            [ 7]  126 	ld	e, (hl)
   0050 23            [ 6]  127 	inc	hl
   0051 56            [ 7]  128 	ld	d, (hl)
   0052 13            [ 6]  129 	inc	de
   0053 7B            [ 4]  130 	ld	a, e
   0054 02            [ 7]  131 	ld	(bc), a
   0055 03            [ 6]  132 	inc	bc
   0056 7A            [ 4]  133 	ld	a, d
   0057 02            [ 7]  134 	ld	(bc), a
                            135 ;e4vm_core.c:31: }
   0058 F1            [10]  136 	pop	af
   0059 DD E1         [14]  137 	pop	ix
   005B C9            [10]  138 	ret
                            139 ;e4vm_core.c:34: void e4vm_core_do_next (e4vm_type_x4thPtr *v)
                            140 ;	---------------------------------
                            141 ; Function e4vm_core_do_next
                            142 ; ---------------------------------
   005C                     143 _e4vm_core_do_next::
   005C CDr00r00      [17]  144 	call	___sdcc_enter_ix
   005F F5            [11]  145 	push	af
   0060 F5            [11]  146 	push	af
   0061 F5            [11]  147 	push	af
                            148 ;e4vm_core.c:37: while (!((*v)->ip == 0)) {
   0062 DD 4E 04      [19]  149 	ld	c, 4 (ix)
   0065 DD 46 05      [19]  150 	ld	b, 5 (ix)
   0068                     151 00101$:
   0068 69            [ 4]  152 	ld	l, c
   0069 60            [ 4]  153 	ld	h, b
   006A 5E            [ 7]  154 	ld	e, (hl)
   006B 23            [ 6]  155 	inc	hl
   006C 56            [ 7]  156 	ld	d, (hl)
   006D 1A            [ 7]  157 	ld	a, (de)
   006E DD 77 FA      [19]  158 	ld	-6 (ix), a
   0071 13            [ 6]  159 	inc	de
   0072 1A            [ 7]  160 	ld	a, (de)
   0073 DD 77 FB      [19]  161 	ld	-5 (ix), a
   0076 1B            [ 6]  162 	dec	de
   0077 DD 7E FB      [19]  163 	ld	a, -5 (ix)
   007A DD B6 FA      [19]  164 	or	a, -6 (ix)
   007D CAr04r01      [10]  165 	jp	Z, 00104$
                            166 ;e4vm_core.c:38: next_wp = (*v)->mem[(*v)->ip];
   0080 21 8A 00      [10]  167 	ld	hl, #0x008a
   0083 19            [11]  168 	add	hl, de
   0084 DD 75 FE      [19]  169 	ld	-2 (ix), l
   0087 DD 74 FF      [19]  170 	ld	-1 (ix), h
   008A E1            [10]  171 	pop	hl
   008B E5            [11]  172 	push	hl
   008C 29            [11]  173 	add	hl, hl
   008D 7D            [ 4]  174 	ld	a, l
   008E DD 86 FE      [19]  175 	add	a, -2 (ix)
   0091 6F            [ 4]  176 	ld	l, a
   0092 7C            [ 4]  177 	ld	a, h
   0093 DD 8E FF      [19]  178 	adc	a, -1 (ix)
   0096 67            [ 4]  179 	ld	h, a
   0097 7E            [ 7]  180 	ld	a, (hl)
   0098 DD 77 FC      [19]  181 	ld	-4 (ix), a
   009B 23            [ 6]  182 	inc	hl
   009C 7E            [ 7]  183 	ld	a, (hl)
   009D DD 77 FD      [19]  184 	ld	-3 (ix), a
                            185 ;e4vm_core.c:39: next_ip = (*v)->ip + 1;
   00A0 DD 7E FA      [19]  186 	ld	a, -6 (ix)
   00A3 C6 01         [ 7]  187 	add	a, #0x01
   00A5 DD 77 FE      [19]  188 	ld	-2 (ix), a
   00A8 DD 7E FB      [19]  189 	ld	a, -5 (ix)
   00AB CE 00         [ 7]  190 	adc	a, #0x00
   00AD DD 77 FF      [19]  191 	ld	-1 (ix), a
                            192 ;e4vm_core.c:40: (*v)->ip = next_ip;
   00B0 DD 7E FE      [19]  193 	ld	a, -2 (ix)
   00B3 12            [ 7]  194 	ld	(de), a
   00B4 13            [ 6]  195 	inc	de
   00B5 DD 7E FF      [19]  196 	ld	a, -1 (ix)
   00B8 12            [ 7]  197 	ld	(de), a
                            198 ;e4vm_core.c:41: (*v)->wp = next_wp;
   00B9 69            [ 4]  199 	ld	l, c
   00BA 60            [ 4]  200 	ld	h, b
   00BB 5E            [ 7]  201 	ld	e, (hl)
   00BC 23            [ 6]  202 	inc	hl
   00BD 56            [ 7]  203 	ld	d, (hl)
   00BE 13            [ 6]  204 	inc	de
   00BF 13            [ 6]  205 	inc	de
   00C0 DD 7E FC      [19]  206 	ld	a, -4 (ix)
   00C3 12            [ 7]  207 	ld	(de), a
   00C4 13            [ 6]  208 	inc	de
   00C5 DD 7E FD      [19]  209 	ld	a, -3 (ix)
   00C8 12            [ 7]  210 	ld	(de), a
                            211 ;e4vm_core.c:42: word_index = (*v)->mem[next_ip];
   00C9 69            [ 4]  212 	ld	l, c
   00CA 60            [ 4]  213 	ld	h, b
   00CB 5E            [ 7]  214 	ld	e, (hl)
   00CC 23            [ 6]  215 	inc	hl
   00CD 56            [ 7]  216 	ld	d, (hl)
   00CE 21 8A 00      [10]  217 	ld	hl, #0x008a
   00D1 19            [11]  218 	add	hl, de
   00D2 DD 75 FC      [19]  219 	ld	-4 (ix), l
   00D5 DD 74 FD      [19]  220 	ld	-3 (ix), h
   00D8 DD 6E FE      [19]  221 	ld	l, -2 (ix)
   00DB DD 66 FF      [19]  222 	ld	h, -1 (ix)
   00DE 29            [11]  223 	add	hl, hl
   00DF 7D            [ 4]  224 	ld	a, l
   00E0 DD 86 FC      [19]  225 	add	a, -4 (ix)
   00E3 6F            [ 4]  226 	ld	l, a
   00E4 7C            [ 4]  227 	ld	a, h
   00E5 DD 8E FD      [19]  228 	adc	a, -3 (ix)
   00E8 67            [ 4]  229 	ld	h, a
   00E9 7E            [ 7]  230 	ld	a, (hl)
   00EA 23            [ 6]  231 	inc	hl
   00EB 66            [ 7]  232 	ld	h, (hl)
   00EC 6F            [ 4]  233 	ld	l, a
                            234 ;e4vm_core.c:43: (*(*v)->core[word_index])(v);
   00ED 7B            [ 4]  235 	ld	a, e
   00EE C6 CD         [ 7]  236 	add	a, #0xcd
   00F0 5F            [ 4]  237 	ld	e, a
   00F1 30 01         [12]  238 	jr	NC,00116$
   00F3 14            [ 4]  239 	inc	d
   00F4                     240 00116$:
   00F4 29            [11]  241 	add	hl, hl
   00F5 19            [11]  242 	add	hl, de
   00F6 7E            [ 7]  243 	ld	a, (hl)
   00F7 23            [ 6]  244 	inc	hl
   00F8 66            [ 7]  245 	ld	h, (hl)
   00F9 6F            [ 4]  246 	ld	l, a
   00FA C5            [11]  247 	push	bc
   00FB C5            [11]  248 	push	bc
   00FC CDr00r00      [17]  249 	call	___sdcc_call_hl
   00FF F1            [10]  250 	pop	af
   0100 C1            [10]  251 	pop	bc
   0101 C3r68r00      [10]  252 	jp	00101$
   0104                     253 00104$:
                            254 ;e4vm_core.c:45: }
   0104 DD F9         [10]  255 	ld	sp, ix
   0106 DD E1         [14]  256 	pop	ix
   0108 C9            [10]  257 	ret
                            258 ;e4vm_core.c:48: void e4vm_core_do_exit (e4vm_type_x4thPtr *v)
                            259 ;	---------------------------------
                            260 ; Function e4vm_core_do_exit
                            261 ; ---------------------------------
   0109                     262 _e4vm_core_do_exit::
   0109 CDr00r00      [17]  263 	call	___sdcc_enter_ix
                            264 ;e4vm_core.c:50: (*v)->rs_p = (*v)->rs_p - 1;
   010C DD 4E 04      [19]  265 	ld	c, 4 (ix)
   010F DD 46 05      [19]  266 	ld	b, 5 (ix)
   0112 69            [ 4]  267 	ld	l, c
   0113 60            [ 4]  268 	ld	h, b
   0114 5E            [ 7]  269 	ld	e, (hl)
   0115 23            [ 6]  270 	inc	hl
   0116 56            [ 7]  271 	ld	d, (hl)
   0117 21 84 00      [10]  272 	ld	hl, #0x0084
   011A 19            [11]  273 	add	hl, de
   011B 5E            [ 7]  274 	ld	e, (hl)
   011C 23            [ 6]  275 	inc	hl
   011D 56            [ 7]  276 	ld	d, (hl)
   011E 2B            [ 6]  277 	dec	hl
   011F 1B            [ 6]  278 	dec	de
   0120 73            [ 7]  279 	ld	(hl), e
   0121 23            [ 6]  280 	inc	hl
   0122 72            [ 7]  281 	ld	(hl), d
   0123 69            [ 4]  282 	ld	l, c
   0124 60            [ 4]  283 	ld	h, b
   0125 4E            [ 7]  284 	ld	c, (hl)
   0126 23            [ 6]  285 	inc	hl
   0127 46            [ 7]  286 	ld	b, (hl)
                            287 ;e4vm_core.c:51: (*v)->ip = (*v)->rs[(*v)->rs_p];
   0128 21 04 00      [10]  288 	ld	hl, #0x0004
   012B 09            [11]  289 	add	hl, bc
   012C EB            [ 4]  290 	ex	de, hl
   012D 69            [ 4]  291 	ld	l, c
   012E 60            [ 4]  292 	ld	h, b
   012F C5            [11]  293 	push	bc
   0130 01 84 00      [10]  294 	ld	bc, #0x0084
   0133 09            [11]  295 	add	hl, bc
   0134 C1            [10]  296 	pop	bc
   0135 7E            [ 7]  297 	ld	a, (hl)
   0136 23            [ 6]  298 	inc	hl
   0137 66            [ 7]  299 	ld	h, (hl)
   0138 6F            [ 4]  300 	ld	l, a
   0139 29            [11]  301 	add	hl, hl
   013A 19            [11]  302 	add	hl, de
   013B 5E            [ 7]  303 	ld	e, (hl)
   013C 23            [ 6]  304 	inc	hl
   013D 56            [ 7]  305 	ld	d, (hl)
   013E 7B            [ 4]  306 	ld	a, e
   013F 02            [ 7]  307 	ld	(bc), a
   0140 03            [ 6]  308 	inc	bc
   0141 7A            [ 4]  309 	ld	a, d
   0142 02            [ 7]  310 	ld	(bc), a
                            311 ;e4vm_core.c:52: }
   0143 DD E1         [14]  312 	pop	ix
   0145 C9            [10]  313 	ret
                            314 ;e4vm_core.c:56: export void *e4vm_core__init (void)
                            315 ;	---------------------------------
                            316 ; Function e4vm_core__init
                            317 ; ---------------------------------
   0146                     318 _e4vm_core__init::
                            319 ;e4vm_core.c:58: __DEFMOD;
   0146 21r46r01      [10]  320 	LD	HL,#. 
   0149 36 C9         [10]  321 	LD (HL),#0xC9 
                            322 ;e4vm_core.c:61: __IMPORT(e4vm_type__init);
                            323 ;e4vm_core.c:65: }
   014B C3r00r00      [10]  324 	jp  _e4vm_type__init
                            325 	.area _CODE
                            326 	.area _INITIALIZER
                            327 	.area _CABS (ABS)
