                              1 ;--------------------------------------------------------
                              2 ; File Created by SDCC : free open source ANSI-C Compiler
                              3 ; Version 3.9.3 #11378 (MINGW32)
                              4 ;--------------------------------------------------------
                              5 	.module e4vm_core_ext
                              6 	.optsdcc -mz80
                              7 	
                              8 ;--------------------------------------------------------
                              9 ; Public variables in this module
                             10 ;--------------------------------------------------------
                             11 	.globl _e4vm_core_ext__init
                             12 	.globl _e4vm_utils__init
                             13 	.globl _e4vm_utils_stack_ds_push
                             14 	.globl _e4vm_utils_add_op
                             15 	.globl _e4vm_type__init
                             16 	.globl _e4vm_core_ext_quit
                             17 	.globl _e4vm_core_ext_do_lit
                             18 	.globl _e4vm_core_ext_get_here_addr
                             19 	.globl _e4vm_core_ext_comma
                             20 	.globl _e4vm_core_ext_branch
                             21 	.globl _e4vm_core_ext_zbranch
                             22 	.globl _e4vm_core_ext_lbrac
                             23 	.globl _e4vm_core_ext_rbrac
                             24 ;--------------------------------------------------------
                             25 ; special function registers
                             26 ;--------------------------------------------------------
                             27 ;--------------------------------------------------------
                             28 ; ram data
                             29 ;--------------------------------------------------------
                             30 	.area _DATA
                             31 ;--------------------------------------------------------
                             32 ; ram data
                             33 ;--------------------------------------------------------
                             34 	.area _INITIALIZED
                             35 ;--------------------------------------------------------
                             36 ; absolute external ram data
                             37 ;--------------------------------------------------------
                             38 	.area _DABS (ABS)
                             39 ;--------------------------------------------------------
                             40 ; global & static initialisations
                             41 ;--------------------------------------------------------
                             42 	.area _HOME
                             43 	.area _GSINIT
                             44 	.area _GSFINAL
                             45 	.area _GSINIT
                             46 ;--------------------------------------------------------
                             47 ; Home
                             48 ;--------------------------------------------------------
                             49 	.area _HOME
                             50 	.area _HOME
                             51 ;--------------------------------------------------------
                             52 ; code
                             53 ;--------------------------------------------------------
                             54 	.area _CODE
                             55 ;e4vm_core_ext.c:25: void e4vm_core_ext_quit (e4vm_type_x4thPtr *v)
                             56 ;	---------------------------------
                             57 ; Function e4vm_core_ext_quit
                             58 ; ---------------------------------
   0000                      59 _e4vm_core_ext_quit::
                             60 ;e4vm_core_ext.c:27: }
   0000 C9            [10]   61 	ret
                             62 ;e4vm_core_ext.c:30: void e4vm_core_ext_do_lit (e4vm_type_x4thPtr *v)
                             63 ;	---------------------------------
                             64 ; Function e4vm_core_ext_do_lit
                             65 ; ---------------------------------
   0001                      66 _e4vm_core_ext_do_lit::
   0001 CDr00r00      [17]   67 	call	___sdcc_enter_ix
                             68 ;e4vm_core_ext.c:32: (*v)->ip = (*v)->ip + 1;
   0004 DD 4E 04      [19]   69 	ld	c, 4 (ix)
   0007 DD 46 05      [19]   70 	ld	b, 5 (ix)
   000A 69            [ 4]   71 	ld	l, c
   000B 60            [ 4]   72 	ld	h, b
   000C 7E            [ 7]   73 	ld	a, (hl)
   000D 23            [ 6]   74 	inc	hl
   000E 66            [ 7]   75 	ld	h, (hl)
   000F 6F            [ 4]   76 	ld	l, a
   0010 5E            [ 7]   77 	ld	e, (hl)
   0011 23            [ 6]   78 	inc	hl
   0012 56            [ 7]   79 	ld	d, (hl)
   0013 2B            [ 6]   80 	dec	hl
   0014 13            [ 6]   81 	inc	de
   0015 7A            [ 4]   82 	ld	a, d
   0016 73            [ 7]   83 	ld	(hl), e
   0017 23            [ 6]   84 	inc	hl
   0018 77            [ 7]   85 	ld	(hl), a
                             86 ;e4vm_core_ext.c:33: e4vm_utils_stack_ds_push(v, (*v)->mem[(*v)->ip]);
   0019 69            [ 4]   87 	ld	l, c
   001A 60            [ 4]   88 	ld	h, b
   001B 7E            [ 7]   89 	ld	a, (hl)
   001C 23            [ 6]   90 	inc	hl
   001D 66            [ 7]   91 	ld	h, (hl)
   001E 6F            [ 4]   92 	ld	l, a
   001F C6 8A         [ 7]   93 	add	a, #0x8a
   0021 5F            [ 4]   94 	ld	e, a
   0022 7C            [ 4]   95 	ld	a, h
   0023 CE 00         [ 7]   96 	adc	a, #0x00
   0025 57            [ 4]   97 	ld	d, a
   0026 7E            [ 7]   98 	ld	a, (hl)
   0027 23            [ 6]   99 	inc	hl
   0028 66            [ 7]  100 	ld	h, (hl)
   0029 6F            [ 4]  101 	ld	l, a
   002A 29            [11]  102 	add	hl, hl
   002B 19            [11]  103 	add	hl, de
   002C 5E            [ 7]  104 	ld	e, (hl)
   002D 23            [ 6]  105 	inc	hl
   002E 56            [ 7]  106 	ld	d, (hl)
   002F D5            [11]  107 	push	de
   0030 C5            [11]  108 	push	bc
   0031 CDr00r00      [17]  109 	call	_e4vm_utils_stack_ds_push
   0034 F1            [10]  110 	pop	af
   0035 F1            [10]  111 	pop	af
                            112 ;e4vm_core_ext.c:34: }
   0036 DD E1         [14]  113 	pop	ix
   0038 C9            [10]  114 	ret
                            115 ;e4vm_core_ext.c:37: void e4vm_core_ext_get_here_addr (e4vm_type_x4thPtr *v)
                            116 ;	---------------------------------
                            117 ; Function e4vm_core_ext_get_here_addr
                            118 ; ---------------------------------
   0039                     119 _e4vm_core_ext_get_here_addr::
   0039 CDr00r00      [17]  120 	call	___sdcc_enter_ix
                            121 ;e4vm_core_ext.c:39: e4vm_utils_stack_ds_push(v, (*v)->hereP);
   003C DD 4E 04      [19]  122 	ld	c, 4 (ix)
   003F DD 46 05      [19]  123 	ld	b, 5 (ix)
   0042 69            [ 4]  124 	ld	l, c
   0043 60            [ 4]  125 	ld	h, b
   0044 5E            [ 7]  126 	ld	e, (hl)
   0045 23            [ 6]  127 	inc	hl
   0046 66            [ 7]  128 	ld	h, (hl)
   0047 6B            [ 4]  129 	ld	l, e
   0048 11 88 00      [10]  130 	ld	de, #0x0088
   004B 19            [11]  131 	add	hl, de
   004C 5E            [ 7]  132 	ld	e, (hl)
   004D 23            [ 6]  133 	inc	hl
   004E 56            [ 7]  134 	ld	d, (hl)
   004F D5            [11]  135 	push	de
   0050 C5            [11]  136 	push	bc
   0051 CDr00r00      [17]  137 	call	_e4vm_utils_stack_ds_push
   0054 F1            [10]  138 	pop	af
   0055 F1            [10]  139 	pop	af
                            140 ;e4vm_core_ext.c:40: }
   0056 DD E1         [14]  141 	pop	ix
   0058 C9            [10]  142 	ret
                            143 ;e4vm_core_ext.c:43: void e4vm_core_ext_comma (e4vm_type_x4thPtr *v)
                            144 ;	---------------------------------
                            145 ; Function e4vm_core_ext_comma
                            146 ; ---------------------------------
   0059                     147 _e4vm_core_ext_comma::
   0059 CDr00r00      [17]  148 	call	___sdcc_enter_ix
                            149 ;e4vm_core_ext.c:45: (*v)->ds_p = (*v)->ds_p - 1;
   005C DD 4E 04      [19]  150 	ld	c, 4 (ix)
   005F DD 46 05      [19]  151 	ld	b, 5 (ix)
   0062 69            [ 4]  152 	ld	l, c
   0063 60            [ 4]  153 	ld	h, b
   0064 5E            [ 7]  154 	ld	e, (hl)
   0065 23            [ 6]  155 	inc	hl
   0066 56            [ 7]  156 	ld	d, (hl)
   0067 21 86 00      [10]  157 	ld	hl, #0x0086
   006A 19            [11]  158 	add	hl, de
   006B 5E            [ 7]  159 	ld	e, (hl)
   006C 23            [ 6]  160 	inc	hl
   006D 56            [ 7]  161 	ld	d, (hl)
   006E 2B            [ 6]  162 	dec	hl
   006F 1B            [ 6]  163 	dec	de
   0070 73            [ 7]  164 	ld	(hl), e
   0071 23            [ 6]  165 	inc	hl
   0072 72            [ 7]  166 	ld	(hl), d
                            167 ;e4vm_core_ext.c:46: e4vm_utils_add_op(v, (*v)->ds[(*v)->ds_p]);
   0073 69            [ 4]  168 	ld	l, c
   0074 60            [ 4]  169 	ld	h, b
   0075 7E            [ 7]  170 	ld	a, (hl)
   0076 23            [ 6]  171 	inc	hl
   0077 66            [ 7]  172 	ld	h, (hl)
   0078 6F            [ 4]  173 	ld	l, a
   0079 C6 44         [ 7]  174 	add	a, #0x44
   007B 5F            [ 4]  175 	ld	e, a
   007C 7C            [ 4]  176 	ld	a, h
   007D CE 00         [ 7]  177 	adc	a, #0x00
   007F 57            [ 4]  178 	ld	d, a
   0080 C5            [11]  179 	push	bc
   0081 01 86 00      [10]  180 	ld	bc, #0x0086
   0084 09            [11]  181 	add	hl, bc
   0085 C1            [10]  182 	pop	bc
   0086 7E            [ 7]  183 	ld	a, (hl)
   0087 23            [ 6]  184 	inc	hl
   0088 66            [ 7]  185 	ld	h, (hl)
   0089 6F            [ 4]  186 	ld	l, a
   008A 29            [11]  187 	add	hl, hl
   008B 19            [11]  188 	add	hl, de
   008C 5E            [ 7]  189 	ld	e, (hl)
   008D 23            [ 6]  190 	inc	hl
   008E 56            [ 7]  191 	ld	d, (hl)
   008F D5            [11]  192 	push	de
   0090 C5            [11]  193 	push	bc
   0091 CDr00r00      [17]  194 	call	_e4vm_utils_add_op
   0094 F1            [10]  195 	pop	af
   0095 F1            [10]  196 	pop	af
                            197 ;e4vm_core_ext.c:47: }
   0096 DD E1         [14]  198 	pop	ix
   0098 C9            [10]  199 	ret
                            200 ;e4vm_core_ext.c:50: void e4vm_core_ext_branch (e4vm_type_x4thPtr *v)
                            201 ;	---------------------------------
                            202 ; Function e4vm_core_ext_branch
                            203 ; ---------------------------------
   0099                     204 _e4vm_core_ext_branch::
   0099 CDr00r00      [17]  205 	call	___sdcc_enter_ix
                            206 ;e4vm_core_ext.c:52: (*v)->ip = (*v)->mem[(*v)->ip + 1] - 1;
   009C DD 6E 04      [19]  207 	ld	l, 4 (ix)
   009F DD 66 05      [19]  208 	ld	h, 5 (ix)
   00A2 4E            [ 7]  209 	ld	c, (hl)
   00A3 23            [ 6]  210 	inc	hl
   00A4 46            [ 7]  211 	ld	b, (hl)
   00A5 21 8A 00      [10]  212 	ld	hl, #0x008a
   00A8 09            [11]  213 	add	hl, bc
   00A9 EB            [ 4]  214 	ex	de, hl
   00AA 0A            [ 7]  215 	ld	a, (bc)
   00AB 3C            [ 4]  216 	inc	a
   00AC 87            [ 4]  217 	add	a, a
   00AD 6F            [ 4]  218 	ld	l, a
   00AE 26 00         [ 7]  219 	ld	h, #0x00
   00B0 19            [11]  220 	add	hl, de
   00B1 5E            [ 7]  221 	ld	e, (hl)
   00B2 23            [ 6]  222 	inc	hl
   00B3 56            [ 7]  223 	ld	d, (hl)
   00B4 1B            [ 6]  224 	dec	de
   00B5 7B            [ 4]  225 	ld	a, e
   00B6 02            [ 7]  226 	ld	(bc), a
   00B7 03            [ 6]  227 	inc	bc
   00B8 7A            [ 4]  228 	ld	a, d
   00B9 02            [ 7]  229 	ld	(bc), a
                            230 ;e4vm_core_ext.c:53: }
   00BA DD E1         [14]  231 	pop	ix
   00BC C9            [10]  232 	ret
                            233 ;e4vm_core_ext.c:56: void e4vm_core_ext_zbranch (e4vm_type_x4thPtr *v)
                            234 ;	---------------------------------
                            235 ; Function e4vm_core_ext_zbranch
                            236 ; ---------------------------------
   00BD                     237 _e4vm_core_ext_zbranch::
   00BD CDr00r00      [17]  238 	call	___sdcc_enter_ix
                            239 ;e4vm_core_ext.c:58: (*v)->ds_p = (*v)->ds_p - 1;
   00C0 DD 4E 04      [19]  240 	ld	c, 4 (ix)
   00C3 DD 46 05      [19]  241 	ld	b, 5 (ix)
   00C6 69            [ 4]  242 	ld	l, c
   00C7 60            [ 4]  243 	ld	h, b
   00C8 5E            [ 7]  244 	ld	e, (hl)
   00C9 23            [ 6]  245 	inc	hl
   00CA 56            [ 7]  246 	ld	d, (hl)
   00CB 21 86 00      [10]  247 	ld	hl, #0x0086
   00CE 19            [11]  248 	add	hl, de
   00CF 5E            [ 7]  249 	ld	e, (hl)
   00D0 23            [ 6]  250 	inc	hl
   00D1 56            [ 7]  251 	ld	d, (hl)
   00D2 2B            [ 6]  252 	dec	hl
   00D3 1B            [ 6]  253 	dec	de
   00D4 73            [ 7]  254 	ld	(hl), e
   00D5 23            [ 6]  255 	inc	hl
   00D6 72            [ 7]  256 	ld	(hl), d
                            257 ;e4vm_core_ext.c:59: if ((*v)->ds[(*v)->ds_p] == 0) {
   00D7 69            [ 4]  258 	ld	l, c
   00D8 60            [ 4]  259 	ld	h, b
   00D9 4E            [ 7]  260 	ld	c, (hl)
   00DA 23            [ 6]  261 	inc	hl
   00DB 46            [ 7]  262 	ld	b, (hl)
   00DC 21 44 00      [10]  263 	ld	hl, #0x0044
   00DF 09            [11]  264 	add	hl, bc
   00E0 EB            [ 4]  265 	ex	de, hl
   00E1 69            [ 4]  266 	ld	l, c
   00E2 60            [ 4]  267 	ld	h, b
   00E3 C5            [11]  268 	push	bc
   00E4 01 86 00      [10]  269 	ld	bc, #0x0086
   00E7 09            [11]  270 	add	hl, bc
   00E8 C1            [10]  271 	pop	bc
   00E9 7E            [ 7]  272 	ld	a, (hl)
   00EA 23            [ 6]  273 	inc	hl
   00EB 66            [ 7]  274 	ld	h, (hl)
   00EC 6F            [ 4]  275 	ld	l, a
   00ED 29            [11]  276 	add	hl, hl
   00EE 19            [11]  277 	add	hl, de
   00EF 5E            [ 7]  278 	ld	e, (hl)
   00F0 23            [ 6]  279 	inc	hl
   00F1 56            [ 7]  280 	ld	d, (hl)
   00F2 7A            [ 4]  281 	ld	a, d
   00F3 B3            [ 4]  282 	or	a, e
   00F4 20 15         [12]  283 	jr	NZ,00103$
                            284 ;e4vm_core_ext.c:60: (*v)->ip = (*v)->mem[(*v)->ip + 1] - 1;
   00F6 21 8A 00      [10]  285 	ld	hl, #0x008a
   00F9 09            [11]  286 	add	hl, bc
   00FA EB            [ 4]  287 	ex	de, hl
   00FB 0A            [ 7]  288 	ld	a, (bc)
   00FC 3C            [ 4]  289 	inc	a
   00FD 87            [ 4]  290 	add	a, a
   00FE 6F            [ 4]  291 	ld	l, a
   00FF 26 00         [ 7]  292 	ld	h, #0x00
   0101 19            [11]  293 	add	hl, de
   0102 5E            [ 7]  294 	ld	e, (hl)
   0103 23            [ 6]  295 	inc	hl
   0104 56            [ 7]  296 	ld	d, (hl)
   0105 1B            [ 6]  297 	dec	de
   0106 7B            [ 4]  298 	ld	a, e
   0107 02            [ 7]  299 	ld	(bc), a
   0108 03            [ 6]  300 	inc	bc
   0109 7A            [ 4]  301 	ld	a, d
   010A 02            [ 7]  302 	ld	(bc), a
   010B                     303 00103$:
                            304 ;e4vm_core_ext.c:62: }
   010B DD E1         [14]  305 	pop	ix
   010D C9            [10]  306 	ret
                            307 ;e4vm_core_ext.c:65: void e4vm_core_ext_lbrac (e4vm_type_x4thPtr *v)
                            308 ;	---------------------------------
                            309 ; Function e4vm_core_ext_lbrac
                            310 ; ---------------------------------
   010E                     311 _e4vm_core_ext_lbrac::
                            312 ;e4vm_core_ext.c:67: (*v)->is_eval_mode = 1;
   010E C1            [10]  313 	pop	bc
   010F E1            [10]  314 	pop	hl
   0110 E5            [11]  315 	push	hl
   0111 C5            [11]  316 	push	bc
   0112 4E            [ 7]  317 	ld	c, (hl)
   0113 23            [ 6]  318 	inc	hl
   0114 46            [ 7]  319 	ld	b, (hl)
   0115 21 CC 00      [10]  320 	ld	hl, #0x00cc
   0118 09            [11]  321 	add	hl, bc
   0119 36 01         [10]  322 	ld	(hl), #0x01
                            323 ;e4vm_core_ext.c:68: }
   011B C9            [10]  324 	ret
                            325 ;e4vm_core_ext.c:71: void e4vm_core_ext_rbrac (e4vm_type_x4thPtr *v)
                            326 ;	---------------------------------
                            327 ; Function e4vm_core_ext_rbrac
                            328 ; ---------------------------------
   011C                     329 _e4vm_core_ext_rbrac::
                            330 ;e4vm_core_ext.c:73: (*v)->is_eval_mode = 0;
   011C C1            [10]  331 	pop	bc
   011D E1            [10]  332 	pop	hl
   011E E5            [11]  333 	push	hl
   011F C5            [11]  334 	push	bc
   0120 4E            [ 7]  335 	ld	c, (hl)
   0121 23            [ 6]  336 	inc	hl
   0122 46            [ 7]  337 	ld	b, (hl)
   0123 21 CC 00      [10]  338 	ld	hl, #0x00cc
   0126 09            [11]  339 	add	hl, bc
   0127 36 00         [10]  340 	ld	(hl), #0x00
                            341 ;e4vm_core_ext.c:74: }
   0129 C9            [10]  342 	ret
                            343 ;e4vm_core_ext.c:78: export void *e4vm_core_ext__init (void)
                            344 ;	---------------------------------
                            345 ; Function e4vm_core_ext__init
                            346 ; ---------------------------------
   012A                     347 _e4vm_core_ext__init::
                            348 ;e4vm_core_ext.c:80: __DEFMOD;
   012A 21r2Ar01      [10]  349 	LD	HL,#. 
   012D 36 C9         [10]  350 	LD (HL),#0xC9 
                            351 ;e4vm_core_ext.c:83: __IMPORT(e4vm_type__init);
   012F CDr00r00      [17]  352 	call	_e4vm_type__init
                            353 ;e4vm_core_ext.c:84: __IMPORT(e4vm_utils__init);
                            354 ;e4vm_core_ext.c:88: }
   0132 C3r00r00      [10]  355 	jp  _e4vm_utils__init
                            356 	.area _CODE
                            357 	.area _INITIALIZER
                            358 	.area _CABS (ABS)
